<?xml version='1.0' encoding='utf-8'?>
<widget id="com.gemini.chat.app" version="1.0.0" xmlns="http://www.w3.org/ns/widgets" xmlns:android="http://schemas.android.com/apk/res/android" xmlns:cdv="http://cordova.apache.org/ns/1.0">
    <name>Gemini聊天助手</name>
    <description>
        基于Google Gemini AI的智能聊天助手，支持对话记忆、多用户、云端同步等功能。
    </description>
    <author email="dev@cordova.apache.org" href="https://cordova.apache.org">
        Gemini Chat Team
    </author>
    <content src="index.html" />
    <access origin="*" />
    <allow-intent href="http://*/*" />
    <allow-intent href="https://*/*" />
    <allow-intent href="tel:*" />
    <allow-intent href="sms:*" />
    <allow-intent href="mailto:*" />
    <allow-intent href="geo:*" />
    <platform name="android">
        <preference name="loglevel" value="DEBUG" />
        <preference name="android-minSdkVersion" value="22" />
        <preference name="android-targetSdkVersion" value="33" />
        <preference name="AndroidLaunchMode" value="singleTop" />
        <preference name="AndroidWindowSoftInputMode" value="adjustResize" />
        <preference name="AndroidPersistentFileLocation" value="Compatibility" />
        <preference name="AndroidExtraFilesystems" value="files,files-external,documents,documents-external,cache,cache-external,root" />
        
        <!-- 权限配置 -->
        <config-file parent="/manifest" target="AndroidManifest.xml">
            <uses-permission android:name="android.permission.INTERNET" />
            <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
            <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
            <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
            <uses-permission android:name="android.permission.CAMERA" />
            <uses-permission android:name="android.permission.RECORD_AUDIO" />
        </config-file>
        
        <!-- 使用默认图标和启动画面 -->
        <!-- 注释掉自定义图标和启动画面，避免构建错误 -->
        <!--
        <icon density="ldpi" src="res/android/ldpi.png" />
        <icon density="mdpi" src="res/android/mdpi.png" />
        <icon density="hdpi" src="res/android/hdpi.png" />
        <icon density="xhdpi" src="res/android/xhdpi.png" />
        <icon density="xxhdpi" src="res/android/xxhdpi.png" />
        <icon density="xxxhdpi" src="res/android/xxxhdpi.png" />
        
        <splash density="land-hdpi" src="res/android/splash-land-hdpi.png" />
        <splash density="land-ldpi" src="res/android/splash-land-ldpi.png" />
        <splash density="land-mdpi" src="res/android/splash-land-mdpi.png" />
        <splash density="land-xhdpi" src="res/android/splash-land-xhdpi.png" />
        <splash density="port-hdpi" src="res/android/splash-port-hdpi.png" />
        <splash density="port-ldpi" src="res/android/splash-port-ldpi.png" />
        <splash density="port-mdpi" src="res/android/splash-port-mdpi.png" />
        <splash density="port-xhdpi" src="res/android/splash-port-xhdpi.png" />
        -->
    </platform>
    
    <platform name="ios">
        <preference name="deployment-target" value="11.0" />
        <preference name="SwiftVersion" value="5.0" />
        <!-- 使用默认图标和启动画面 -->
        <!-- 注释掉自定义图标和启动画面，避免构建错误 -->
        <!--
        <icon height="57" platform="ios" src="res/ios/icon-57.png" width="57" />
        <icon height="114" platform="ios" src="res/ios/icon-57-2x.png" width="114" />
        <icon height="40" platform="ios" src="res/ios/icon-40.png" width="40" />
        <icon height="80" platform="ios" src="res/ios/icon-40-2x.png" width="80" />
        <icon height="50" platform="ios" src="res/ios/icon-50.png" width="50" />
        <icon height="100" platform="ios" src="res/ios/icon-50-2x.png" width="100" />
        <icon height="60" platform="ios" src="res/ios/icon-60.png" width="60" />
        <icon height="120" platform="ios" src="res/ios/icon-60-2x.png" width="120" />
        <icon height="180" platform="ios" src="res/ios/icon-60-3x.png" width="180" />
        <icon height="72" platform="ios" src="res/ios/icon-72.png" width="72" />
        <icon height="144" platform="ios" src="res/ios/icon-72-2x.png" width="144" />
        <icon height="76" platform="ios" src="res/ios/icon-76.png" width="76" />
        <icon height="152" platform="ios" src="res/ios/icon-76-2x.png" width="152" />
        <icon height="167" platform="ios" src="res/ios/icon-167.png" width="167" />
        <icon height="29" platform="ios" src="res/ios/icon-small.png" width="29" />
        <icon height="58" platform="ios" src="res/ios/icon-small-2x.png" width="58" />
        <icon height="87" platform="ios" src="res/ios/icon-small-3x.png" width="87" />
        <icon height="1024" platform="ios" src="res/ios/icon-1024.png" width="1024" />
        <splash height="1136" platform="ios" src="res/ios/Default-568h@2x~iphone.png" width="640" />
        <splash height="1334" platform="ios" src="res/ios/Default-667h.png" width="750" />
        <splash height="2208" platform="ios" src="res/ios/Default-736h.png" width="1242" />
        <splash height="1242" platform="ios" src="res/ios/Default-Landscape-736h.png" width="2208" />
        <splash height="1536" platform="ios" src="res/ios/Default-Landscape@2x~ipad.png" width="2048" />
        <splash height="768" platform="ios" src="res/ios/Default-Landscape~ipad.png" width="1024" />
        <splash height="2048" platform="ios" src="res/ios/Default-Portrait@2x~ipad.png" width="1536" />
        <splash height="1024" platform="ios" src="res/ios/Default-Portrait~ipad.png" width="768" />
        <splash height="960" platform="ios" src="res/ios/Default@2x~iphone.png" width="640" />
        <splash height="480" platform="ios" src="res/ios/Default~iphone.png" width="320" />
        -->
    </platform>
    
    <!-- 插件配置 -->
    <plugin name="cordova-plugin-whitelist" spec="1.3.3" />
    <plugin name="cordova-plugin-device" spec="2.0.2" />
    <plugin name="cordova-plugin-splashscreen" spec="5.0.2" />
    <plugin name="cordova-plugin-ionic-webview" spec="2.0.0" />
    <plugin name="cordova-plugin-ionic-keyboard" spec="2.0.5" />
    <plugin name="cordova-plugin-file" spec="6.0.1" />
    <plugin name="cordova-plugin-file-transfer" spec="1.7.1" />
    <plugin name="cordova-plugin-camera" spec="4.0.3" />
    <plugin name="cordova-plugin-media-capture" spec="3.0.2" />
    <plugin name="cordova-plugin-network-information" spec="2.0.1" />
    <plugin name="cordova-plugin-statusbar" spec="2.4.2" />
    <plugin name="cordova-plugin-inappbrowser" spec="3.0.0" />
    
    <!-- 安全策略 -->
    <access origin="*" />
    <allow-navigation href="*" />
    <allow-intent href="*" />
    
    <!-- 首选项配置 -->
    <preference name="DisallowOverscroll" value="true" />
    <preference name="android-minSdkVersion" value="22" />
    <preference name="BackupWebStorage" value="none" />
    <preference name="SplashMaintainAspectRatio" value="true" />
    <preference name="FadeSplashScreenDuration" value="300" />
    <preference name="SplashShowOnlyFirstTime" value="false" />
    <preference name="SplashScreen" value="screen" />
    <preference name="SplashScreenDelay" value="3000" />
    <preference name="StatusBarOverlaysWebView" value="false" />
    <preference name="StatusBarBackgroundColor" value="#424242" />
    <preference name="StatusBarStyle" value="lightcontent" />
</widget>