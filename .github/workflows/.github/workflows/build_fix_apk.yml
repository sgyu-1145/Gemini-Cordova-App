name: ğŸ† FINAL-SUCCESS-APK-BUILD

on:
  workflow_dispatch: # å…è®¸æ‰‹åŠ¨ç‚¹å‡»è§¦å‘

jobs:
  build-android-debug:
    runs-on: ubuntu-latest
    
    steps:
    - name: 1. Checkout Code
      uses: actions/checkout@v4

    - name: 2. Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18' 
    
    - name: 3. ç»“æ„ä¿®å¤ä¸ç¼–è¯‘ (FINAL FIX - ä¸€ä½“åŒ–)
      run: |
        echo "--- æ­£åœ¨ä¿®å¤æ–‡ä»¶ç»“æ„ï¼šåˆ›å»º www æ–‡ä»¶å¤¹å¹¶ç§»åŠ¨æ ¸å¿ƒå†…å®¹ ---"
        # 1. åˆ›å»º www æ–‡ä»¶å¤¹ (ä¿®å¤ GitHub ç½‘é¡µä¸Šä¼ é—®é¢˜)
        mkdir www
        # 2. ç§»åŠ¨æ‚¨çš„ç½‘é¡µæ–‡ä»¶åˆ° www æ–‡ä»¶å¤¹å†… (åªç§»åŠ¨æ‚¨ä»“åº“é‡Œå·²æœ‰çš„æ–‡ä»¶)
        mv index.html www/
        mv script.js www/
        mv styles.css www/
        
        echo "--- æ­£åœ¨ä½¿ç”¨ NPX ä¸´æ—¶ç¯å¢ƒå®‰è£…å¹³å°å¹¶ç¼–è¯‘ APK (ç»•è¿‡æ‰€æœ‰ npm è·¯å¾„é”™è¯¯) ---"
        # 3. ä½¿ç”¨ npx ä¸´æ—¶å®‰è£… Cordovaï¼Œå¹¶æ·»åŠ  Android å¹³å°
        npx -p cordova@12.0.0 cordova platform add android@12.0.0 --no-telemetry
        
        # 4. ç¼–è¯‘ Debug APK
        npx -p cordova@12.0.0 cordova build android --debug --no-telemetry
        
    - name: 4. Upload APK Artifact
      uses: actions/upload-artifact@v4
      with:
        name: Final-APK-Download-Success
        path: platforms/android/app/build/outputs/apk/debug/app-debug.apk
        retention-days: 7
